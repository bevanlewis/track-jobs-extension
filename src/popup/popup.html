<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Job Tracker</title>
    <link rel="stylesheet" href="popup.css" />
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <div class="header">
        <h1>Job Tracker</h1>
        <p>Save LinkedIn job details to your Google Sheet</p>
      </div>

      <!-- Loading State -->
      <div id="loading" class="loading">Loading...</div>

      <!-- Authentication Section -->
      <div id="auth-section" class="section hidden">
        <h2>Authentication Required</h2>
        <p>Please sign in with Google to continue</p>
        <button id="signin-btn" class="btn">Sign in with Google</button>
      </div>

      <!-- Sheet Connection Section -->
      <div id="sheet-section" class="section hidden">
        <h2>Connect Google Sheet</h2>
        <div class="form-group">
          <label for="sheet-url">Google Sheet URL:</label>
          <input
            type="text"
            id="sheet-url"
            placeholder="https://docs.google.com/spreadsheets/d/..."
          />
        </div>
        <button id="connect-btn" class="btn">Connect Sheet</button>
      </div>

      <!-- No Job Selected Section -->
      <div id="no-job-section" class="section hidden">
        <h2>No Job Selected</h2>
        <p>Please visit a LinkedIn job page to save job details.</p>

        <!-- Sheet Connection Status -->
        <div id="sheet-info-no-job" class="sheet-info hidden">
          <div class="sheet-header">
            <strong>Connected to:</strong>
            <span id="sheet-name-no-job">Loading...</span>
            <button
              id="disconnect-btn-no-job"
              class="btn btn-secondary btn-small"
            >
              Disconnect
            </button>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
          <button id="logout-btn" class="btn btn-secondary">Logout</button>
        </div>
      </div>

      <!-- Job Details Section -->
      <div id="job-section" class="section hidden">
        <h2>Job Details</h2>

        <!-- Job Info Display -->
        <div id="job-details" class="job-details">
          <h3>Extracted Job Information</h3>
          <p>
            <strong>Company:</strong>
            <span id="company-display">Loading...</span>
          </p>
          <p>
            <strong>Role:</strong> <span id="role-display">Loading...</span>
          </p>
        </div>

        <!-- Sheet Connection Status -->
        <div id="sheet-info" class="sheet-info hidden">
          <div class="sheet-header">
            <strong>Connected to:</strong>
            <span id="sheet-name">Loading...</span>
            <button id="disconnect-btn" class="btn btn-secondary btn-small">
              Disconnect
            </button>
          </div>
        </div>

        <!-- Job Form -->
        <form id="job-form">
          <div class="form-group">
            <label for="stage">Application Stage:</label>
            <select id="stage" required>
              <option value="Saved" selected>Saved</option>
              <option value="Applied" selected>Applied</option>
              <option value="Interviewing">Interviewing</option>
              <option value="Ghosted">Ghosted</option>
              <option value="Rejected">Rejected</option>
              <option value="Accepted">Accepted</option>
            </select>
          </div>

          <div class="form-group">
            <label for="priority">Priority:</label>
            <select id="priority" required>
              <option value="Low" selected>Low</option>
              <option value="Medium">Medium</option>
              <option value="High">High</option>
            </select>
          </div>

          <div class="form-group">
            <label for="notes">Notes (Optional):</label>
            <textarea
              id="notes"
              rows="3"
              placeholder="Add any additional notes..."
            ></textarea>
          </div>

          <button type="submit" id="save-btn" class="btn">
            Save to Google Sheet
          </button>
        </form>
      </div>

      <!-- Status Messages -->
      <div id="status" class="status hidden"></div>
    </div>

    <script type="module" src="popup.js"></script>
  </body>
</html>
